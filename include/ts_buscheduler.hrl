%%%-------------------------------------------------------------------
%%% @author vasco
%%% @copyright (C) 2017, <COMPANY>
%%% @doc
%%%
%%% @end
%%% Created : 30. Sep 2017 5:07 PM
%%%-------------------------------------------------------------------
-author("vasco").
-vc('$Id$ ').


%% Here is a Python script to make Erlang tuples from CSV file:
%%
%%with open("rsrqindex_to_tp_code.csv") as f:
%%  content = f.readlines()
%%
%%tuples = ["{"+x.strip()+"}," for x in content]
%%
%%for tuple in tuples:
%%  print tuple

%% CELL_LOAD is tuples of {hour, cell_load, index of column in RSRQ2TP table}
-define(CELL_LOAD, {
  {0,0.7,15},
  {1,0.5,11},
  {2,0.35,8},
  {3,0.3,7},
  {4,0.2,5},
  {5,0.2,5},
  {6,0.25,6},
  {7,0.3,7},
  {8,0.4,9},
  {9,0.5,11},
  {10,0.6,13},
  {11,0.7,15},
  {12,0.9,19},
  {13,0.95,20},
  {14,1.0,21},
  {15,1,21},
  {16,1.0,21},
  {17,1.0,21},
  {18,1.0,21},
  {19,1.0,21},
  {20,0.95,20},
  {21,0.9,19},
  {22,0.85,18},
  {23,0.8,17}
}).

%% RSRQ distribution table:
%% {RSRS index, RSRQ value}
-define(RSRQ_DIST,{
  {1,-25,0},
  {2,-24.5,0},
  {3,-24,0},
  {4,-23.5,0},
  {5,-23,0},
  {6,-22.5,0},
  {7,-22,0},
  {8,-21.5,0},
  {9,-21,0},
  {10,-20.5,0},
  {11,-20,0},
  {12,-19.5,1},
  {13,-19,2},
  {14,-18.5,3},
  {15,-18,4},
  {16,-17.5,5},
  {17,-17,6},
  {18,-16.5,7},
  {19,-16,8},
  {20,-15.5,9},
  {21,-15,10},
  {22,-14.5,11},
  {23,-14,12},
  {24,-13.5,13},
  {25,-13,14},
  {26,-12.5,15},
  {27,-12,16},
  {28,-11.5,17},
  {29,-11,18},
  {30,-10.5,19},
  {31,-10,20},
  {32,-9.5,21},
  {33,-9,22},
  {34,-8.5,23},
  {35,-8,24},
  {36,-7.5,25},
  {37,-7,26},
  {38,-6.5,27},
  {39,-6,28},
  {40,-5.5,29},
  {41,-5,30},
  {42,-4.5,31},
  {43,-4,32},
  {44,-3.5,33},
  {45,-3,34},
  {46,-2.5,34},
  {47,-2,34},
  {48,-1.5,34},
  {49,-1,34},
  {50,-0.5,34},
  {51,0,34}
}).

%% RSRQ to Throughput, given Cell load
%% actually using RSRQ index, instead of RSRQ value
%% 2D tuple (each row is a tuple containing throughput values for given RSRQ):
%% {{tp_val, tp_val,......tp_val},{tp_val, tp_val,......tp_val},........,{tp_val, tp_val,......tp_val}}
-define(RSRQ2TP,{
  {0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125},
  {0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125,0.28125},
  {0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372,0.372},
  {0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475,0.48475},
  {0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624,0.624},
  {0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425,0.79425},
  {1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.224},
  {1.0,1.224,1.224,1.224,1.224,1.224,1.224,1.224,1.224,1.224,1.224,1.224,1.452,1.452,1.452,1.452,1.452,1.452,1.452,1.452,1.452},
  {1.224,1.452,1.452,1.452,1.452,1.452,1.452,1.452,1.452,1.693,1.693,1.693,1.693,1.693,1.693,1.693,1.693,1.693,1.693,1.693,1.693},
  {1.452,1.693,1.693,1.693,1.693,1.693,1.956,1.956,1.956,1.956,1.956,1.956,1.956,1.956,1.956,1.956,1.956,1.956,1.956,1.956,2.25},
  {1.693,1.956,1.956,1.956,2.25,2.25,2.25,2.25,2.25,2.25,2.25,2.25,2.25,2.25,2.584,2.584,2.584,2.584,2.584,2.584,2.584},
  {2.25,2.25,2.25,2.25,2.584,2.584,2.584,2.584,2.584,2.584,2.584,2.967,2.967,2.967,2.967,2.967,2.967,3.408,3.408,3.408,3.408},
  {2.584,2.584,2.584,2.967,2.967,2.967,2.967,2.967,3.408,3.408,3.408,3.408,3.408,3.916,3.916,3.916,3.916,4.5,4.5,4.5,5.13675},
  {2.967,2.967,3.408,3.408,3.408,3.408,3.916,3.916,3.916,3.916,3.916,4.5,4.5,4.5,5.13675,5.13675,5.804,5.804,6.51225,7.272,8.09375},
  {3.408,3.916,3.916,3.916,4.5,4.5,4.5,4.5,5.13675,5.13675,5.13675,5.804,5.804,6.51225,6.51225,7.272,8.09375,8.988,9.96525,14.98275,28.428},
  {4.5,4.5,4.5,5.13675,5.13675,5.13675,5.804,5.804,5.804,6.51225,6.51225,7.272,8.09375,8.09375,9.96525,12.21075,28.428,40.125,40.125,40.125,40.125},
  {5.13675,5.804,5.804,5.804,6.51225,6.51225,6.51225,7.272,8.09375,8.09375,8.988,9.96525,12.21075,22.59375,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {6.51225,6.51225,7.272,7.272,8.09375,8.09375,8.988,8.988,9.96525,12.21075,14.98275,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {8.09375,8.09375,8.09375,8.988,9.96525,9.96525,11.036,13.5,16.692,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {8.988,9.96525,9.96525,11.036,12.21075,13.5,16.692,22.59375,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {9.96525,11.036,12.21075,13.5,16.692,22.59375,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {12.21075,13.5,14.98275,20.556,36.3125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {13.5,16.692,20.556,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {16.692,22.59375,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {22.59375,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125},
  {13.5,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125,40.125}
}).


% A representation of a <buscheduler/> tag, a single BU Scheduler message request
% being sent to the server (BU application). Send requests can have a ack="no_ack"
% property, which makes them not wait for a response frame from the
% server.
-record(buscheduler_request, {
  type = raw,
  users_count = 250,
  data
}).

-record(buschedule_session, {
  seq = 0,
  users_count = 250, %%TODO configurable
  state
}).

